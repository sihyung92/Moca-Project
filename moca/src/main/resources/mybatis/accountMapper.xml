<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kkssj.moca.model.AccountDao">
  <select id="selectUserByKakaoId" parameterType="Integer" resultType="com.kkssj.moca.model.entity.AccountVo">
  SELECT * FROM ACCOUNT WHERE PLATFORMID=#{platformId} AND PLATFORMTYPE LIKE 'kakao'
  </select>
  <select id="selectUserByAnotherId" parameterType="map" resultType="com.kkssj.moca.model.entity.AccountVo">
  SELECT * FROM ACCOUNT WHERE PLATFORMID='id' AND PLATFORMTYPE LIKE 'Another'
  </select>
  <insert id="insertUser" parameterType="com.kkssj.moca.model.entity.AccountVo">
  INSERT INTO ACCOUNT (NICKNAME ,PLATFORMTYPE ,PLATFORMID ,EMAIL ,PROFILEIMAGE ,THUMBNAILIMAGE) VALUES (#{nickname},#{platformType},#{platformId},#{email},#{profileImage},#{thumbnailImage})
  </insert>
  <update id="updateUserByKakaoId" parameterType="com.kkssj.moca.model.entity.AccountVo" >
  UPDATE ACCOUNT SET NICKNAME=#{nickname}, EMAIL=#{email}, PROFILEIMAGE=#{profileImage}, THUMBNAILIMAGE=#{thumbnailImage} WHERE PLATFORMID=#{platformId} AND PLATFORMTYPE LIKE 'kakao'
  </update>
  <update id="updateUserByAnotherId" parameterType="com.kkssj.moca.model.entity.AccountVo" >
  UPDATE ACCOUNT SET NICKNAME=#{nickname}, EMAIL=#{email}, PROFILEIMAGE=#{profileImage}, THUMBNAILIMAGE=#{thumbnailImage} WHERE PLATFORMID=#{platformId} AND PLATFORMTYPE LIKE 'Another'
  </update>
  <delete id="deleteUser" parameterType="Integer" ></delete>
  
  <select id="selectFollowerList" parameterType="Integer" resultType="com.kkssj.moca.model.entity.AccountVo">
  	SELECT ACCOUNT_ID,NICKNAME,THUMBNAILIMAGE,ACCOUNTLEVEL FROM ACCOUNT WHERE ACCOUNT_ID IN(SELECT FOLLOWER FROM FOLLOW WHERE FOLLOWING=#{ACCOUNT_ID})
  </select>
  <select id="selectFollowingList" parameterType="Integer" resultType="com.kkssj.moca.model.entity.AccountVo">
  	SELECT ACCOUNT_ID,NICKNAME,THUMBNAILIMAGE,ACCOUNTLEVEL FROM ACCOUNT WHERE ACCOUNT_ID IN(SELECT FOLLOWING FROM FOLLOW WHERE FOLLOWER=#{ACCOUNT_ID})
  </select>
  <insert id="insertFollow" parameterType="map">
  	insert into FOLLOW (FOLLOWER,FOLLOWING) VALUES (#{follower},#{following})
  </insert>
  <delete id="deleteFollow" parameterType="map">
  	delete from FOLLOW where FOLLOWER=#{follower} and FOLLOWING=#{following}
  </delete>
</mapper>